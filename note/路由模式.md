# 路由模式

- [hash](#1-hash)
- [history](#2-history)
- [差异](#3-差异)

# 1. hash
在地址栏的 URL 中会夹杂一个 `#`。
- 在 `#` 号后面出现的任何字符都会被浏览器解读为位置标识符。这些字符不会被发送到服务器端。
- 改变 `#` 号后面的部分，浏览器只会滚动到相应的位置，不会重新加载网页。
- 每一改变 `#` 后面的部分，都会在浏览器的访问历史中增加一个记录，使用后退按钮，就可以回到上一个位置。
- 通过 window.location.hash 属性读取 hash 值。
- 使用 window.addEventListener("hashchange", fun) 监听 hash 的变化。


# 2. history
`history` 模式主要是通过 history API 的 `pushState()` 和 `replaceState()` 两个方法来实现。

pushState() 可以改变 url 地址且不会发送请求, replaceState() 可以读取历史记录栈,还可以对浏览器记录进行修改。


# 3. 差异
- hash 和 history 都是利用浏览器的两种特性实现前端路由，history 利用了浏览器记录栈的 API 实现，hash 是监听 location 对象的 hash 值变化来实现的。
- history 会触发添加到浏览器历史记录栈中，hash 不会触发。
- history 模式往往需要后端支持，如果后端nginx没有覆盖路由地址，就会返回404，hash因为是同文档的url，即使后端没有覆盖路由地址，也不会返回404。
- hash模式下，如果把url作为参数传后端，那么后端会直接从’#‘号截断，只处理’#'号前的url，因此会存在#后的参数内容丢失的问题，不过这个问题hash模式下也有解决的方法。



